<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è€ƒæ ¸è¨ˆç®—</title>
    <link rel="stylesheet" href="css/AssessmentCalc.css">
</head>
<body>
    <!-- ä¸»å…§å®¹ -->
    <div class="calc-content">
        <div class="container">
            <h2 class="center-title">ğŸ“…å¤šå…ƒè¨ˆç®—æ©ŸğŸ’»</h2>
            <div class="form-container">
                <!-- åŸºæœ¬è³‡æ–™ -->
                <div class="form-section">
                    <h3>åŸºæœ¬è³‡æ–™</h3>
                    <div class="form-group">
                        <label for="leave-year">æ…°ä¼‘å¹´åº¦ï¼ˆæ°‘åœ‹å¹´ï¼‰ï¼š</label>
                        <select id="leave-year" required>
                            <option value="">è«‹é¸æ“‡</option>
                            <!-- å‹•æ…‹ç”Ÿæˆé¸é … -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="birth-year">å‡ºç”Ÿæ—¥æœŸï¼ˆæ°‘åœ‹å¹´ï¼‰ï¼š</label>
                        <div class="date-input">
                            <select id="birth-year" required>
                                <option value="">å¹´</option>
                                <!-- å‹•æ…‹ç”Ÿæˆé¸é … -->
                            </select>
                            <select id="birth-month" required>
                                <option value="">æœˆ</option>
                                <!-- å‹•æ…‹ç”Ÿæˆé¸é … -->
                            </select>
                            <select id="birth-day" required>
                                <option value="">æ—¥</option>
                                <!-- å‹•æ…‹ç”Ÿæˆé¸é … -->
                            </select>
                        </div>
                        <small>å¹´ä»½ç¯„åœï¼š65-118</small>
                    </div>
                    <div class="form-group">
                        <label for="gender">æ€§åˆ¥ï¼š</label>
                        <select id="gender" required>
                            <option value="">è«‹é¸æ“‡</option>
                            <option value="male">ç”·</option>
                            <option value="female">å¥³</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="arrival-year">åˆ°éƒ¨æ—¥æœŸï¼ˆæ°‘åœ‹å¹´ï¼‰ï¼š</label>
                        <div class="date-input">
                            <select id="arrival-year" required>
                                <option value="">å¹´</option>
                                <!-- å‹•æ…‹ç”Ÿæˆé¸é … -->
                            </select>
                            <select id="arrival-month" required>
                                <option value="">æœˆ</option>
                                <!-- å‹•æ…‹ç”Ÿæˆé¸é … -->
                            </select>
                            <select id="arrival-day" required>
                                <option value="">æ—¥</option>
                                <!-- å‹•æ…‹ç”Ÿæˆé¸é … -->
                            </select>
                        </div>
                        <small>å¹´ä»½ç¯„åœï¼š80-118</small>
                    </div>
                    <div class="form-group">
                        <label for="appoint-year">ä»»å®˜æ—¥æœŸï¼ˆæ°‘åœ‹å¹´ï¼‰ï¼š</label>
                        <div class="date-input">
                            <select id="appoint-year" required>
                                <option value="">å¹´</option>
                                <!-- å‹•æ…‹ç”Ÿæˆé¸é … -->
                            </select>
                            <select id="appoint-month" required>
                                <option value="">æœˆ</option>
                                <!-- å‹•æ…‹ç”Ÿæˆé¸é … -->
                            </select>
                            <select id="appoint-day" required>
                                <option value="">æ—¥</option>
                                <!-- å‹•æ…‹ç”Ÿæˆé¸é … -->
                            </select>
                        </div>
                        <small>å¹´ä»½ç¯„åœï¼š80-118</small>
                    </div>
                </div>

                <!-- å†å…¥ç‡Ÿ/è‚²å¬°è³‡æ–™ -->
                <div class="form-section">
                    <h3>å†å…¥ç‡Ÿ/è‚²å¬°è³‡æ–™</h3>
                    <div class="form-group">
                        <label for="is-reenlist">æ˜¯å¦ç‚ºå†å…¥ç‡Ÿ/è‚²å¬°äººå“¡ï¼š</label>
                        <input type="checkbox" id="is-reenlist">
                    </div>
                    <div id="reenlist-details" style="display: none;">
                        <div class="form-group">
                            <label for="reenlist-year">å†å…¥ç‡Ÿ/å¾©è·æ—¥æœŸï¼ˆæ°‘åœ‹å¹´ï¼‰ï¼š</label>
                            <div class="date-input">
                                <select id="reenlist-year">
                                    <option value="">å¹´</option>
                                    <!-- å‹•æ…‹ç”Ÿæˆé¸é … -->
                                </select>
                                <select id="reenlist-month">
                                    <option value="">æœˆ</option>
                                    <!-- å‹•æ…‹ç”Ÿæˆé¸é … -->
                                </select>
                                <select id="reenlist-day">
                                    <option value="">æ—¥</option>
                                    <!-- å‹•æ…‹ç”Ÿæˆé¸é … -->
                                </select>
                            </div>
                            <small>å¹´ä»½ç¯„åœï¼š80-118</small>
                        </div>
                        <div class="form-group">
                            <label for="first-retire-year">ç¬¬ä¸€æ¬¡é€€ä¼/è‚²å¬°ç”Ÿæ•ˆæ—¥æœŸï¼ˆæ°‘åœ‹å¹´ï¼‰ï¼š</label>
                            <div class="date-input">
                                <select id="first-retire-year">
                                    <option value="">å¹´</option>
                                    <!-- å‹•æ…‹ç”Ÿæˆé¸é … -->
                                </select>
                                <select id="first-retire-month">
                                    <option value="">æœˆ</option>
                                    <!-- å‹•æ…‹ç”Ÿæˆé¸é … -->
                                </select>
                                <select id="first-retire-day">
                                    <option value="">æ—¥</option>
                                    <!-- å‹•æ…‹ç”Ÿæˆé¸é … -->
                                </select>
                            </div>
                            <small>å¹´ä»½ç¯„åœï¼š80-118</small>
                        </div>
                    </div>
                </div>

                <!-- å—è¨“è¨˜éŒ„ -->
                <div class="form-section">
                    <h3>å—è¨“è¨˜éŒ„</h3>
                    <div id="training-list"></div>
                    <button type="button" onclick="addTrainingRecord()">æ–°å¢å—è¨“è¨˜éŒ„</button>
                </div>

                <div class="button-group">
                    <button onclick="calculateAll()">è¨ˆç®—</button>
                    <button type="button" onclick="clearAll()">æ¸…é™¤å…§å®¹</button>
                </div>
            </div>

            <!-- çµæœé¡¯ç¤º -->
            <div id="result" class="result-box"></div>
        </div>
    </div>

    <script src="js/AssessmentCalc.js"></script>
    <script>
        // åŒæ­¥ä¸»é é¢çš„å¤œé–“æ¨¡å¼
        function syncDarkMode() {
            const isDarkMode = parent.document.body.classList.contains('dark-mode');
            if (isDarkMode) {
                document.body.classList.add('dark-mode');
            } else {
                document.body.classList.remove('dark-mode');
            }
        }

        // åˆå§‹åŒæ­¥
        syncDarkMode();

        // ç›£è½ä¸»é é¢å¤œé–“æ¨¡å¼è®ŠåŒ–
        const observer = new MutationObserver(syncDarkMode);
        observer.observe(parent.document.body, { attributes: true, attributeFilter: ['class'] });

        // å‹•æ…‹èª¿æ•´ iframe é«˜åº¦
        function sendIframeHeight() {
            const height = document.documentElement.scrollHeight;
            parent.postMessage({
                type: 'iframeResize',
                height: height,
                url: window.location.href
            }, '*');
        }

        // åˆå§‹èª¿æ•´é«˜åº¦
        window.addEventListener('load', sendIframeHeight);
        window.addEventListener('resize', sendIframeHeight);

        // ç›£è½ DOM è®ŠåŒ–ä»¥å‹•æ…‹èª¿æ•´é«˜åº¦
        const domObserver = new MutationObserver(sendIframeHeight);
        domObserver.observe(document.body, { childList: true, subtree: true });

        // è™•ç†ä¸»é é¢çš„é«˜åº¦è«‹æ±‚
        window.addEventListener('message', function(event) {
            if (event.data === 'requestHeight') {
                sendIframeHeight();
            }
        });
    </script>
</body>
</html>
